<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="article-title">ê¸°ì‚¬ ë³´ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css");
        body { font-family: "Pretendard Variable", Pretendard, -apple-system, sans-serif; }
        
        /* ì½˜í…ì¸  ìŠ¤íƒ€ì¼ */
        .article-content h2 {
            font-size: 1.875rem;
            font-weight: 700;
            margin: 2rem 0 1rem;
            color: #1f2937;
        }
        
        .article-content h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 1.5rem 0 0.75rem;
            color: #374151;
        }
        
        .article-content p {
            margin: 1rem 0;
            line-height: 1.75;
            color: #4b5563;
        }
        
        .article-content ul {
            margin: 1rem 0;
            padding-left: 1.5rem;
            list-style: disc;
        }
        
        .article-content li {
            margin: 0.5rem 0;
            line-height: 1.75;
            color: #4b5563;
        }
        
        .article-content strong {
            font-weight: 600;
            color: #1f2937;
        }
        
        .article-content mark {
            background: #fef3c7;
            padding: 0.125rem 0.25rem;
            border-radius: 0.25rem;
        }
        
        .article-content pre {
            margin: 1.5rem 0;
            overflow-x: auto;
        }
        
        /* ì´ë¯¸ì§€ í‚¤ì›Œë“œ ìˆ¨ê¹€ */
        .article-content p:has([data-image-keyword]) {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- ìƒë‹¨ í—¤ë” -->
    <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100">
        <div class="max-w-4xl mx-auto px-4">
            <div class="flex items-center justify-between h-14">
                <a href="index.html" class="text-xl font-bold tracking-tight text-gray-900 hover:text-blue-600 transition-colors">
                    â† Curator.<span class="text-blue-600">AI</span>
                </a>
                <span class="text-xs text-gray-400" id="category-badge">AI/í…Œí¬</span>
            </div>
        </div>
    </header>

    <!-- ë¡œë”© -->
    <div id="loading" class="max-w-4xl mx-auto px-4 py-12">
        <div class="animate-pulse space-y-4">
            <div class="h-8 bg-gray-200 rounded w-3/4"></div>
            <div class="h-4 bg-gray-200 rounded w-1/4"></div>
            <div class="h-64 bg-gray-200 rounded"></div>
        </div>
    </div>

    <!-- ê¸°ì‚¬ ë‚´ìš© -->
    <article id="article-container" class="max-w-4xl mx-auto px-4 py-12 hidden">
        <!-- í—¤ë” -->
        <div class="mb-8">
            <div class="flex items-center gap-3 mb-4">
                <span id="category" class="bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-sm font-medium">AI/í…Œí¬</span>
                <span id="ai-badge" class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-3 py-1 rounded-full text-sm">ğŸ¤– AI ìƒì„±</span>
            </div>
            <h1 id="title" class="text-4xl font-bold text-gray-900 mb-4"></h1>
            <div class="flex items-center gap-4 text-sm text-gray-500">
                <span id="source"></span>
                <span>â€¢</span>
                <span id="time"></span>
            </div>
        </div>

        <!-- ì¸ë„¤ì¼ -->
        <div id="thumbnail-container" class="mb-8 rounded-2xl overflow-hidden">
            <img id="thumbnail" class="w-full h-auto" onerror="this.parentElement.style.display='none'">
        </div>

        <!-- ë³¸ë¬¸ -->
        <div id="content" class="article-content prose max-w-none bg-white p-8 rounded-2xl shadow-sm">
            <!-- AI ìƒì„± ì½˜í…ì¸ ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>

        <!-- í•˜ë‹¨ ë²„íŠ¼ -->
        <div class="mt-12 flex gap-4">
            <a href="index.html" class="flex-1 bg-gray-900 text-white px-6 py-3 rounded-xl hover:bg-gray-800 transition-colors text-center font-medium">
                â† ëª©ë¡ìœ¼ë¡œ
            </a>
            <button onclick="window.print()" class="bg-white border border-gray-200 px-6 py-3 rounded-xl hover:bg-gray-50 transition-colors font-medium">
                ğŸ–¨ï¸ ì¸ì‡„
            </button>
        </div>
    </article>

    <!-- 404 ë©”ì‹œì§€ -->
    <div id="not-found" class="max-w-4xl mx-auto px-4 py-12 text-center hidden">
        <div class="text-6xl mb-4">ğŸ˜¢</div>
        <h2 class="text-2xl font-bold text-gray-900 mb-4">ê¸°ì‚¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h2>
        <p class="text-gray-600 mb-8">ìš”ì²­í•˜ì‹  ê¸°ì‚¬ê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
        <a href="index.html" class="inline-block bg-gray-900 text-white px-6 py-3 rounded-xl hover:bg-gray-800 transition-colors font-medium">
            í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </a>
    </div>

    <script>
        async function loadArticle() {
            try {
                // URLì—ì„œ ê¸°ì‚¬ ì œëª© ê°€ì ¸ì˜¤ê¸°
                const urlParams = new URLSearchParams(window.location.search);
                const articleTitle = urlParams.get('id');
                
                if (!articleTitle) {
                    showNotFound();
                    return;
                }

                // data.json ë¡œë“œ
                const response = await fetch('data.json?t=' + new Date().getTime());
                if (!response.ok) throw new Error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                
                const data = await response.json();
                
                // ì œëª©ìœ¼ë¡œ ê¸°ì‚¬ ì°¾ê¸°
                const article = data.articles.find(a => a.title === decodeURIComponent(articleTitle));
                
                if (!article) {
                    showNotFound();
                    return;
                }

                // ê¸°ì‚¬ ë Œë”ë§
                renderArticle(article);
                
            } catch (error) {
                console.error('ê¸°ì‚¬ ë¡œë“œ ì˜¤ë¥˜:', error);
                showNotFound();
            }
        }

        function renderArticle(article) {
            // ë¡œë”© ìˆ¨ê¸°ê³  ê¸°ì‚¬ í‘œì‹œ
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('article-container').classList.remove('hidden');

            // ë©”íƒ€ ì •ë³´
            document.title = article.title + ' - Curator.AI';
            document.getElementById('article-title').textContent = article.title;
            document.getElementById('title').textContent = article.title;
            document.getElementById('source').textContent = article.source;
            document.getElementById('time').textContent = article.time;
            document.getElementById('category').textContent = article.category || 'AI/í…Œí¬';
            document.getElementById('category-badge').textContent = article.category || 'AI/í…Œí¬';

            // AI ìƒì„± ë°°ì§€ ìˆ¨ê¹€
            document.getElementById('ai-badge').style.display = 'none';

            // ì¸ë„¤ì¼
            if (article.image) {
                document.getElementById('thumbnail').src = article.image;
            } else {
                document.getElementById('thumbnail-container').style.display = 'none';
            }

            // ë³¸ë¬¸ ë‚´ìš©
            let content = article.content || article.summary;
            
            // [IMAGE:...] í‚¤ì›Œë“œ ì œê±°
            content = content.replace(/\[IMAGE:[^\]]+\]/g, '');
            
            document.getElementById('content').innerHTML = content;

            // ì•„ì´ì½˜ ì´ˆê¸°í™”
            lucide.createIcons();
        }

        function showNotFound() {
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('not-found').classList.remove('hidden');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        loadArticle();
    </script>
</body>
</html>
