<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="article-title">ê¸°ì‚¬ ë³´ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css");
        body { font-family: "Pretendard Variable", Pretendard, -apple-system, sans-serif; }
        
        /* ì½˜í…ì¸  ìŠ¤íƒ€ì¼ */
        .article-content h1 {
            font-size: 2.25rem;
            font-weight: 800;
            margin: 2.5rem 0 1.5rem;
            color: #111827;
        }
        
        .article-content h2 {
            font-size: 1.875rem;
            font-weight: 700;
            margin: 2rem 0 1rem;
            color: #1f2937;
        }
        
        .article-content h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 1.5rem 0 0.75rem;
            color: #374151;
        }
        
        .article-content p {
            margin: 1rem 0;
            line-height: 1.8;
            color: #4b5563;
            font-size: 1.0625rem;
        }
        
        .article-content ul, .article-content ol {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }
        
        .article-content ul {
            list-style: disc;
        }
        
        .article-content ol {
            list-style: decimal;
        }
        
        .article-content li {
            margin: 0.5rem 0;
            line-height: 1.75;
            color: #4b5563;
        }
        
        .article-content strong {
            font-weight: 600;
            color: #1f2937;
        }
        
        .article-content em {
            font-style: italic;
            color: #6b7280;
        }
        
        .article-content code {
            background: #f3f4f6;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-family: 'Courier New', monospace;
            font-size: 0.875em;
            color: #db2777;
        }
        
        .article-content pre {
            background: #1f2937;
            color: #f9fafb;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin: 1.5rem 0;
        }
        
        .article-content pre code {
            background: none;
            color: inherit;
            padding: 0;
        }
        
        .article-content blockquote {
            border-left: 4px solid #3b82f6;
            padding-left: 1rem;
            margin: 1.5rem 0;
            color: #6b7280;
            font-style: italic;
        }
        
        .article-content a {
            color: #3b82f6;
            text-decoration: underline;
        }
        
        .article-content a:hover {
            color: #2563eb;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- ìƒë‹¨ í—¤ë” -->
    <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-gray-100">
        <div class="max-w-4xl mx-auto px-4">
            <div class="flex items-center justify-between h-14">
                <a href="index.html" class="text-xl font-bold tracking-tight text-gray-900 hover:text-blue-600 transition-colors">
                    â† Curator.<span class="text-blue-600">AI</span>
                </a>
                <span class="text-xs text-gray-400" id="category-badge">AI/í…Œí¬</span>
            </div>
        </div>
    </header>

    <!-- ë¡œë”© -->
    <div id="loading" class="max-w-4xl mx-auto px-4 py-12">
        <div class="animate-pulse space-y-4">
            <div class="h-8 bg-gray-200 rounded w-3/4"></div>
            <div class="h-4 bg-gray-200 rounded w-1/4"></div>
            <div class="h-64 bg-gray-200 rounded"></div>
        </div>
    </div>

    <!-- ê¸°ì‚¬ ë‚´ìš© -->
    <article id="article-container" class="max-w-4xl mx-auto px-4 py-12 hidden">
        <!-- í—¤ë” -->
        <div class="mb-8">
            <div class="flex items-center gap-3 mb-4">
                <span id="category" class="bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-sm font-medium">AI/í…Œí¬</span>
                <span id="date" class="text-sm text-gray-500"></span>
            </div>
            <h1 id="title" class="text-4xl font-bold text-gray-900 mb-4"></h1>
            <p id="summary" class="text-lg text-gray-600 leading-relaxed mb-6"></p>
            <div class="flex items-center gap-4 text-sm text-gray-500">
                <span id="source">AI Life Studio</span>
                <span>â€¢</span>
                <span id="time"></span>
            </div>
        </div>

        <!-- ì¸ë„¤ì¼ -->
        <div id="thumbnail-container" class="mb-8 rounded-2xl overflow-hidden shadow-lg">
            <img id="thumbnail" class="w-full h-auto" onerror="this.parentElement.style.display='none'">
        </div>

        <!-- ë³¸ë¬¸ -->
        <div id="content" class="article-content bg-white p-8 md:p-12 rounded-2xl shadow-sm">
            <!-- AI ìƒì„± ì½˜í…ì¸ ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>

        <!-- í•˜ë‹¨ ë²„íŠ¼ -->
        <div class="mt-12 flex gap-4">
            <a href="index.html" class="flex-1 bg-gray-900 text-white px-6 py-3 rounded-xl hover:bg-gray-800 transition-colors text-center font-medium">
                â† ëª©ë¡ìœ¼ë¡œ
            </a>
            <button onclick="window.print()" class="bg-white border border-gray-200 px-6 py-3 rounded-xl hover:bg-gray-50 transition-colors font-medium">
                ğŸ–¨ï¸ ì¸ì‡„
            </button>
        </div>
    </article>

    <!-- 404 ë©”ì‹œì§€ -->
    <div id="not-found" class="max-w-4xl mx-auto px-4 py-12 text-center hidden">
        <div class="text-6xl mb-4">ğŸ˜¢</div>
        <h2 class="text-2xl font-bold text-gray-900 mb-4">ê¸°ì‚¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h2>
        <p class="text-gray-600 mb-8">ìš”ì²­í•˜ì‹  ê¸°ì‚¬ê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
        <a href="index.html" class="inline-block bg-gray-900 text-white px-6 py-3 rounded-xl hover:bg-gray-800 transition-colors font-medium">
            í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </a>
    </div>

    <script>
        // ì¹´í…Œê³ ë¦¬ ë§¤í•‘ (ì˜ë¬¸ â†’ í•œê¸€)
        const categoryNames = {
            'ai': 'AI',
            'it': 'IT/Tech',
            'economy': 'ê²½ì œ',
            'life': 'ë¼ì´í”„',
            'global': 'ê¸€ë¡œë²Œ'
        };

        async function loadArticle() {
            try {
                // URLì—ì„œ slug ê°€ì ¸ì˜¤ê¸°
                const urlParams = new URLSearchParams(window.location.search);
                const slug = urlParams.get('slug');
                
                if (!slug) {
                    showNotFound();
                    return;
                }

                // slugì—ì„œ ì¹´í…Œê³ ë¦¬ ì¶”ì¶œ (íŒŒì¼ëª… í˜•ì‹: YYYY-MM-DD-title)
                // contents/ ë””ë ‰í† ë¦¬ êµ¬ì¡°ì—ì„œ ì¹´í…Œê³ ë¦¬ë¥¼ ì•Œ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ
                // ëª¨ë“  ì¹´í…Œê³ ë¦¬ JSON íŒŒì¼ì„ ê²€ìƒ‰í•´ì•¼ í•¨
                const categories = ['ai', 'it', 'economy', 'life', 'global'];
                let article = null;
                
                // ê° ì¹´í…Œê³ ë¦¬ì˜ page_1.jsonì—ì„œ ê²€ìƒ‰
                for (const cat of categories) {
                    try {
                        const response = await fetch(`data/${cat}/page_1.json?t=` + new Date().getTime());
                        if (response.ok) {
                            const data = await response.json();
                            // JSON íŒŒì¼ì—ì„œ articles ë°°ì—´ ì‚¬ìš© (itemsê°€ ì•„ë‹˜!)
                            const articles = data.articles || data.items || [];
                            article = articles.find(item => item.slug === slug);
                            if (article) {
                                article.category = categoryNames[cat] || cat.toUpperCase();
                                break;
                            }
                        }
                    } catch (e) {
                        // ì¹´í…Œê³ ë¦¬ íŒŒì¼ì´ ì—†ìœ¼ë©´ ë‹¤ìŒìœ¼ë¡œ
                        continue;
                    }
                }
                
                if (!article) {
                    showNotFound();
                    return;
                }

                // ê¸°ì‚¬ ë Œë”ë§
                renderArticle(article);
                
            } catch (error) {
                console.error('ê¸°ì‚¬ ë¡œë“œ ì˜¤ë¥˜:', error);
                showNotFound();
            }
        }

        function renderArticle(article) {
            // ë¡œë”© ìˆ¨ê¸°ê³  ê¸°ì‚¬ í‘œì‹œ
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('article-container').classList.remove('hidden');

            // ë©”íƒ€ ì •ë³´
            document.title = article.title + ' - Curator.AI';
            document.getElementById('article-title').textContent = article.title;
            document.getElementById('title').textContent = article.title;
            document.getElementById('summary').textContent = article.summary || '';
            document.getElementById('source').textContent = article.source || 'AI Life Studio';
            document.getElementById('date').textContent = article.date || '';
            document.getElementById('time').textContent = article.time || formatDate(article.date);
            document.getElementById('category').textContent = article.category || 'AI/í…Œí¬';
            document.getElementById('category-badge').textContent = article.category || 'AI/í…Œí¬';

            // ì¸ë„¤ì¼
            if (article.image) {
                document.getElementById('thumbnail').src = article.image;
            } else {
                document.getElementById('thumbnail-container').style.display = 'none';
            }

            // ë³¸ë¬¸ ë‚´ìš©
            let content = article.content || article.html || formatContent(article.summary);
            
            document.getElementById('content').innerHTML = content;

            // ì•„ì´ì½˜ ì´ˆê¸°í™”
            lucide.createIcons();
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString('ko-KR', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
        }

        function formatContent(text) {
            if (!text) return '';
            // ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ë¥¼ HTML ë¬¸ë‹¨ìœ¼ë¡œ ë³€í™˜
            return text.split('\n\n').map(p => `<p>${p}</p>`).join('');
        }

        function showNotFound() {
            document.getElementById('loading').classList.add('hidden');
            document.getElementById('not-found').classList.remove('hidden');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        loadArticle();
    </script>
</body>
</html>
